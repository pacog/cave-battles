!function(){"use strict";function t(){return{restrict:"E",templateUrl:"app/battle-view/tunnel/tunnel.tpl.html",scope:{tunnelInfo:"="},replace:!0}}angular.module("caveBattles.battle-view.tunnel",[]).directive("tunnel",t)}(),function(){"use strict";function t(){return{restrict:"E",templateUrl:"app/battle-view/node/node.tpl.html",scope:{nodeInfo:"="},controller:"NodeController",controllerAs:"vm",bindToController:!0,replace:!0}}angular.module("caveBattles.battle-view.node",["caveBattles.battle-view.node-controller"]).directive("node",t)}(),function(){"use strict";function t(t){function e(e){e.stopPropagation(),i.nodeInfo.canBeReachedBySelectedNode?t.requestNodeForcesToGoToNode(i.nodeInfo):t.requestSelection(i.nodeInfo)}function n(){return i.nodeInfo.partialOwner?100*(1-i.nodeInfo.ownerStrength/i.nodeInfo.DEFAULT_NODE_STRENGTH):100}var i=this;i.nodeClicked=e,i.getTopFill=n}angular.module("caveBattles.battle-view.node-controller",["caveBattles.battle-handler"]).controller("NodeController",t),t.$inject=["BattleHandler"]}(),function(){"use strict";function t(){return{restrict:"E",templateUrl:"app/battle-view/army/army.tpl.html",scope:{armyInfo:"="},replace:!0,controller:"ArmyController",controllerAs:"vm",bindToController:!0}}angular.module("caveBattles.battle-view.army",["caveBattles.battle-view.army-controller"]).directive("army",t)}(),function(){"use strict";function t(){}angular.module("caveBattles.battle-view.army-controller",[]).controller("ArmyController",t)}(),function(){"use strict";function t(t){function e(e){this.ongoingEvents=[],this.scheduledEvents=[],this.scheduledEvents.push(new t({nodes:e.nodes,players:e.players,relatedOngoingEvents:this.ongoingEvents,scheduler:e.scheduler}))}var n=function(t){this.init(t)};return n.prototype={init:e},n}angular.module("caveBattles.actions.plan-ia",["caveBattles.actions.plan-ia-scheduled"]).factory("PlanAIAction",t),t.$inject=["PlanAIActionScheduled"]}(),function(){"use strict";function t(t,e,n){function i(e){this.relatedOngoingEvents=e.relatedOngoingEvents,this.scheduler=e.scheduler,this.scheduledFor=t.getTime()}function o(){var t=this;angular.forEach(e.model.players,function(i){if(i.isAI()){var o=n.getNextAction(i,e.model.nodes);o&&(o.params.scheduler=t.scheduler,t.scheduler.addEvent(o.name,o.params))}})}var r=function(t){this.init(t)};return r.prototype={init:i,execute:o},r}angular.module("caveBattles.actions.plan-ia-scheduled",["caveBattles.utils.timer","caveBattles.simple-ai","caveBattles.battle-model"]).factory("PlanAIActionScheduled",t),t.$inject=["Timer","BattleModel","SimpleAI"]}(),function(){"use strict";function t(t,e){function n(n){this.ongoingEvents=[],this.scheduledEvents=[],n.army&&n.army.force&&(this.ongoingEvents.push(new t({army:n.army,destinationNode:n.destinationNode})),this.scheduledEvents.push(new e({army:n.army,destinationNode:n.destinationNode,relatedOngoingEvents:this.ongoingEvents})))}var i=function(t){this.init(t)};return i.prototype={init:n},i}angular.module("caveBattles.actions.move-army",["caveBattles.actions.move-army-ongoing","caveBattles.actions.move-army-scheduled"]).factory("MoveArmyAction",t),t.$inject=["MoveArmyActionOnGoing","MoveArmyActionScheduled"]}(),function(){"use strict";function t(t){function e(e){this.relatedOngoingEvents=e.relatedOngoingEvents,this.army=e.army,this.scheduledFor=t.getTime()+1e3*this.army.timeToGetToDestination(e.destinationNode),this.destinationNode=e.destinationNode}function n(){this.destinationNode.handleArmyArriving(this.army)}var i=function(t){this.init(t)};return i.prototype={init:e,execute:n},i}angular.module("caveBattles.actions.move-army-scheduled",["caveBattles.utils.timer"]).factory("MoveArmyActionScheduled",t),t.$inject=["Timer"]}(),function(){"use strict";function t(t){function e(e){this.timeAdded=t.getTime(),this.army=e.army,this.destinationNode=e.destinationNode,this.progress=e.progress||0}function n(){var e=t.getTime();this.army.updatePosition(e-this.timeAdded,this.destinationNode)}var i=function(t){this.init(t)};return i.prototype={init:e,update:n},i}angular.module("caveBattles.actions.move-army-ongoing",["caveBattles.utils.timer"]).factory("MoveArmyActionOnGoing",t),t.$inject=["Timer"]}(),function(){"use strict";function t(t){function e(e){this.ongoingEvents=[],this.scheduledEvents=[],e.originNode&&e.destinationNode&&this.scheduledEvents.push(new t({originNode:e.originNode,destinationNode:e.destinationNode,scheduler:e.scheduler,relatedOngoingEvents:this.ongoingEvents}))}var n=function(t){this.init(t)};return n.prototype={init:e},n}angular.module("caveBattles.actions.move-army-ia",["caveBattles.actions.move-army-ia-scheduled"]).factory("MoveArmyIAAction",t),t.$inject=["MoveArmyIAActionScheduled"]}(),function(){"use strict";function t(t,e,n){function i(e){this.relatedOngoingEvents=e.relatedOngoingEvents,this.army=e.army,this.scheduledFor=t.getTime(),this.destinationNode=e.destinationNode,this.originNode=e.originNode,this.scheduler=e.scheduler}function o(){var t=n.moveForcesBetweenNodesAndGetRelatedEvent(this.originNode,this.destinationNode);t&&this.scheduler.addEvent(e.MOVE_ARMY,t)}var r=function(t){this.init(t)};return r.prototype={init:i,execute:o},r}angular.module("caveBattles.actions.move-army-ia-scheduled",["caveBattles.utils.timer","caveBattles.battle-events","caveBattles.battle-model"]).factory("MoveArmyIAActionScheduled",t),t.$inject=["Timer","BattleEvents","BattleModel"]}(),function(){"use strict";function t(t){function e(){this.ongoingEvents=[],this.scheduledEvents=[],this.scheduledEvents.push(new t({relatedOngoingEvents:this.ongoingEvents}))}var n=function(t){this.init(t)};return n.prototype={init:e},n}angular.module("caveBattles.actions.fill-nodes",["caveBattles.actions.fill-nodes-scheduled"]).factory("FillNodesAction",t),t.$inject=["FillNodesActionScheduled"]}(),function(){"use strict";function t(t,e){function n(e){this.relatedOngoingEvents=e.relatedOngoingEvents,this.scheduledFor=t.getTime()}function i(){angular.forEach(e.model.nodes,function(t){t.fillNode()})}var o=function(t){this.init(t)};return o.prototype={init:n,execute:i},o}angular.module("caveBattles.actions.fill-nodes-scheduled",["caveBattles.utils.timer","caveBattles.battle-model"]).factory("FillNodesActionScheduled",t),t.$inject=["Timer","BattleModel"]}(),function(){"use strict";function t(){function t(){return(new Date).getTime()}var e={getTime:t};return e}angular.module("caveBattles.utils.timer",[]).factory("Timer",t)}(),function(){"use strict";function t(){function t(t){this.orderBy=t&&t.orderBy?t.orderBy:"time",this.firstElement=null,this._currentSize=0}function e(t){if(!this.firstElement)return this.firstElement={element:t,next:null},void this._currentSize++;for(var e=null,n=this.firstElement;n;){if(n.element[this.orderBy]>t[this.orderBy]){var i={element:t,next:n};return e?e.next=i:this.firstElement=i,void this._currentSize++}if(!n.next){var o={element:t,next:null};return n.next=o,void this._currentSize++}e=n,n=n.next}}function n(){var t=null;return this.firstElement&&(t=this.firstElement.element,this.firstElement=this.firstElement.next),this._currentSize--,t}function i(t){if(!t)return!1;for(var e=this.firstElement,n=null;e;){if(e.element===t)return n?n.next=e.next:this.firstElement=e.next,this._currentSize--,e.element;n=e,e=e.next}return!1}function o(){return this._currentSize}function r(t){for(var e=this.firstElement;e;)t(e.element),e=e.next}var a=function(t){this.init(t)};return a.prototype={init:t,add:e,pop:n,remove:i,size:o,forEach:r},a}angular.module("caveBattles.utils.ordered-list",[]).factory("OrderedList",t)}(),function(){"use strict";function t(){function t(){return e++}var e=42,n={getNewId:t};return n}angular.module("caveBattles.utils.id-generator",[]).factory("IdGenerator",t)}(),function(){"use strict";function t(){function t(t,e){var n=0,i=0;return n=e.x-t.x,n*=n,i=e.y-t.y,i*=i,Math.sqrt(n+i)}function e(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function n(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}function i(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}}var o={distanceBetweenPoints:t,pointInBetween:e,inclinationFromTwoPointsDeg:n,getPointInBetween:i};return o}angular.module("caveBattles.utils.geometry",[]).factory("Geometry",t)}(),function(){"use strict";function t(){return{restrict:"E",templateUrl:"app/main/main-screen.tpl.html",replace:!0,controller:"MainScreenController",controllerAs:"vm"}}angular.module("caveBattles.main-screen",["caveBattles.main-screen.controller"]).directive("mainScreen",t)}(),function(){"use strict";function t(t,e){function n(){e.getAllMaps().then(function(t){o.maps=t})}function i(e){o.battleStarted=!0,t.init(e)}var o=this;o.battleStarted=!1,o.startBattle=i,n()}angular.module("caveBattles.main-screen.controller",["caveBattles.battle-handler","caveBattles.battle-view","battleCaves.battle-config"]).controller("MainScreenController",t),t.$inject=["BattleHandler","BattleConfig"]}(),function(){"use strict";function t(t,e,n){return{restrict:"E",templateUrl:"app/battle-view/battle-view.tpl.html",replace:!0,link:function(i){function o(){n.subscribeToBattleModelInitiallised(a)}function r(){function n(){e.hasEnded()||(t(e.update),window.requestAnimationFrame(n))}window.requestAnimationFrame(n)}function a(){i.battleInfo=n.model,r()}o(),i.onBackgroundClicked=function(){e.removeCurrentSelection()}}}}angular.module("caveBattles.battle-view",["caveBattles.battle-handler","caveBattles.battle-model","caveBattles.battle-view.node","caveBattles.battle-view.tunnel","caveBattles.battle-view.army"]).directive("battleView",t),t.$inject=["$timeout","BattleHandler","BattleModel"]}(),function(){"use strict";angular.module("caveBattles.maps.map1",[]).constant("MAP1",{name:"Map 1",map:{nodes:[{id:"1",position:{x:10,y:10}},{id:"2",position:{x:50,y:10}},{id:"3",position:{x:90,y:10}},{id:"4",position:{x:10,y:50}},{id:"5",position:{x:50,y:50}},{id:"6",position:{x:90,y:50}},{id:"7",position:{x:10,y:90}},{id:"8",position:{x:50,y:90}},{id:"9",position:{x:90,y:90}}],tunnels:[{from:"1",to:"2"},{from:"2",to:"3"},{from:"3",to:"6"},{from:"6",to:"9"},{from:"9",to:"8"},{from:"8",to:"7"},{from:"7",to:"4"},{from:"4",to:"1"},{from:"1",to:"5"},{from:"3",to:"5"},{from:"7",to:"5"},{from:"9",to:"5"},{from:"2",to:"5"},{from:"8",to:"5"}],players:[{initialNode:"1",initialForce:10,number:"1",type:"human"},{initialNode:"9",initialForce:10,number:"2",type:"AI"}]}})}(),function(){"use strict";function t(t,e){function n(){var n=t.defer();return n.resolve([e]),n.promise}var i={getAllMaps:n};return i}angular.module("battleCaves.battle-config",["caveBattles.maps.map1"]).factory("BattleConfig",t),t.$inject=["$q","MAP1"]}(),function(){angular.module("caveBattles.tunnel",["caveBattles.utils.id-generator","caveBattles.utils.geometry"]).factory("Tunnel",["IdGenerator","Geometry",function(t,e){var n=function(t,e){this.init(t,e)};return n.prototype={init:function(n,i){this.id=t.getNewId(),this.from=i[n.from],this.to=i[n.to],this.length=e.distanceBetweenPoints(this.from.position,this.to.position),this.middle=e.pointInBetween(this.from.position,this.to.position),this.inclinationDeg=e.inclinationFromTwoPointsDeg(this.from.position,this.to.position)},connectsNodes:function(t,e){return this.from.id===t.id&&this.to.id===e.id||this.to.id===t.id&&this.from.id===e.id?!0:!1}},n}])}(),function(){angular.module("caveBattles.player",["ngLodash","caveBattles.utils.id-generator"]).factory("Player",["lodash","IdGenerator",function(t,e){var n="human",i="AI",o=function(t){this.init(t)};return o.prototype={init:function(n){t.assign(this,n),this.id=e.getNewId()},isHuman:function(){return this.type===n},isAI:function(){return this.type===i}},o}])}(),function(){angular.module("caveBattles.node",["ngLodash"]).factory("Node",["lodash",function(t){var e=1,n=50,i=function(e,n){t.assign(this,e),this.currentOwner=null,this.partialOwner=null,this._setOwnerStrength(0),this.battleModel=n};return i.prototype={DEFAULT_NODE_STRENGTH:10,fillNode:function(){this.currentOwner&&this._setOwnerStrength(this.ownerStrength+e)},handleArmyArriving:function(t){t.player===this.currentOwner?(this._setOwnerStrength(this.ownerStrength+t.force),t.destroy()):t.player===this.partialOwner?t.force>=this.DEFAULT_NODE_STRENGTH-this.ownerStrength?this._setArmyAsOwner(t,this.DEFAULT_NODE_STRENGTH-this.ownerStrength):(this._setOwnerStrength(this.ownerStrength+t.force),t.destroy()):this.currentOwner||this.partialOwner?this.currentOwner&&this.currentOwner!==t.player?this._handleArmyArrivingAtEnemyNode(t):this.partialOwner&&this.partialOwner!==t.player&&this._handleArmyArrivingAtEnemyNode(t):this._handleArmyArrivingAtEmptyNode(t)},canReachNode:function(t){if(!t)return!1;for(var e=0;e<this.battleModel.model.tunnels.length;e++)if(this.battleModel.model.tunnels[e].connectsNodes(this,t))return!0;return!1},updateCanBeReachedBySelectedNode:function(t){this.canBeReachedBySelectedNode=!1,t&&this.canReachNode(t)&&(this.canBeReachedBySelectedNode=!0)},_handleArmyArrivingAtEmptyNode:function(t){t.force>=this.DEFAULT_NODE_STRENGTH?this._setArmyAsOwner(t,t.force-this.DEFAULT_NODE_STRENGTH):(this.partialOwner=t.player,this._setOwnerStrength(t.force),t.destroy())},_handleArmyArrivingAtEnemyNode:function(t){t.force>this.ownerStrength?(t.force=t.force-this.ownerStrength,this._setOwnerStrength(0),this.currentOwner=null,this._handleArmyArrivingAtEmptyNode(t)):(this._setOwnerStrength(this.ownerStrength-t.force),t.destroy())},_setArmyAsOwner:function(t,e){(!e||0>e)&&(e=0),this._setOwnerStrength(e),this.currentOwner=t.player,this.partialOwner=null,t.destroy()},_setOwnerStrength:function(t){this.ownerStrength=Math.min(t,n)}},i}])}(),function(){"use strict";angular.module("caveBattles.battle.constants",[]).constant("DEFAULT_FORCE_TO_TAKE",1).constant("FILL_NODES_EVERY",1e3).constant("PLAN_AI_EVERY",1e3)}(),function(){angular.module("caveBattles.battle-scheduler",["caveBattles.utils.ordered-list","caveBattles.battle-actions-factory","caveBattles.utils.timer","caveBattles.battle-events"]).service("BattleScheduler",["$timeout","$interval","OrderedList","BattleEvents","BattleActionsFactory","Timer",function(t,e,n,i,o,r){var a=new n({orderBy:"timeAdded"}),s=new n({orderBy:"scheduledFor"}),l=null,c=function(t,e){for(var n=o.getAction(t,e),i=0;i<n.ongoingEvents.length;i++)a.add(n.ongoingEvents[i]);for(i=0;i<n.scheduledEvents.length;i++)s.add(n.scheduledEvents[i]);m()},u=function(t,n,i){e(function(){c(t,n)},i)},d=function(){a.forEach(function(t){t.update()})},m=function(){if(l&&t.cancel(l),s.firstElement){var e=s.firstElement.element.scheduledFor-r.getTime();0>=e&&(e=0),l=t(f,e)}},f=function(){var t=s.firstElement.element.relatedOngoingEvents;if(t)for(var e=0;e<t.length;e++)a.remove(t[e]);s.firstElement.element.execute(),s.pop(),m()};return{addEvent:c,addRecurringEvent:u,updateBattleInfo:d}}])}(),function(){"use strict";function t(t,e,n,i,o,r){function a(t){f.nodes={},f.players=[],f.armies=[],f.tunnels=[],angular.forEach(t.map.nodes,function(t){f.nodes[t.id]=new o(t,v)}),angular.forEach(t.map.players,function(t){var n=new e(t);f.players.push(n),f.nodes[t.initialNode].currentOwner=n,f.nodes[t.initialNode].ownerStrength=n.initialForce}),angular.forEach(t.map.tunnels,function(t){f.tunnels.push(new n(t,f.nodes))}),l()}function s(t){for(var e in f.nodes)f.nodes[e].updateCanBeReachedBySelectedNode(t)}function l(){angular.forEach(h,function(t){t()})}function c(t){h.push(t),t()}function u(e){h=t.without(h,e)}function d(){for(var e=[],n=0;n<f.armies.length;n++)f.armies[n].deleted&&e.push(f.armies[n]);for(n=0;n<e.length;n++)f.armies=t.without(f.armies,e[n])}function m(t,e){var n=Math.floor(t.ownerStrength*r);if(0===n)return null;var o=new i({force:n,player:t.currentOwner,originNode:t});return t.ownerStrength=t.ownerStrength-n,f.armies.push(o),{army:o,destinationNode:e,force:n}}var f={nodes:null,players:null,armies:null,tunnels:null},h=[],v={init:a,cleanDeletedArmies:d,updateNodesThatCanBeReachedFromSelectedNode:s,model:f,subscribeToBattleModelInitiallised:c,unsubscribeToBattleModelInitiallised:u,moveForcesBetweenNodesAndGetRelatedEvent:m};return v}angular.module("caveBattles.battle-model",["ngLodash","caveBattles.player","caveBattles.tunnel","caveBattles.army","caveBattles.node","caveBattles.battle.constants"]).factory("BattleModel",t),t.$inject=["lodash","Player","Tunnel","Army","Node","DEFAULT_FORCE_TO_TAKE"]}(),function(){function t(t,e,n,i,o){function r(t){f=angular.copy(t),o.init(f),a()}function a(){t.addRecurringEvent(e.FILL_NODES,{},n),t.addRecurringEvent(e.PLAN_AI,{scheduler:t},i)}function s(){o.cleanDeletedArmies(),t.updateBattleInfo(v)}function l(t){c(),t.selected||t.currentOwner&&t.currentOwner.isHuman()&&(h=t,t.selected=!0),u()}function c(){h&&(h.selected=!1),h=null,u()}function u(){o.updateNodesThatCanBeReachedFromSelectedNode(h)}function d(n){if(h){var i=o.moveForcesBetweenNodesAndGetRelatedEvent(h,n);i&&t.addEvent(e.MOVE_ARMY,i),c()}}function m(){return!1}var f,h=null,v={init:r,requestSelection:l,hasEnded:m,update:s,requestNodeForcesToGoToNode:d,removeCurrentSelection:c};return v}angular.module("caveBattles.battle-handler",["caveBattles.battle-scheduler","caveBattles.battle.constants","caveBattles.battle-model","caveBattles.battle-events"]).service("BattleHandler",t),t.$inject=["BattleScheduler","BattleEvents","FILL_NODES_EVERY","PLAN_AI_EVERY","BattleModel"]}(),function(){"use strict";angular.module("caveBattles.battle-events",[]).constant("BattleEvents",{MOVE_ARMY:"MOVE_ARMY",FILL_NODES:"FILL_NODES",PLAN_AI:"PLAN_AI",MOVE_ARMY_IA:"MOVE_ARMY_IA"})}(),function(){function t(t,e,n,i,o){function r(r,a){switch(r){case t.MOVE_ARMY:return new e(a);case t.FILL_NODES:return new n(a);case t.PLAN_AI:return new i(a);case t.MOVE_ARMY_IA:return new o(a)}}var a={getAction:r};return a}angular.module("caveBattles.battle-actions-factory",["caveBattles.battle-events","caveBattles.actions.move-army","caveBattles.actions.fill-nodes","caveBattles.actions.plan-ia","caveBattles.actions.move-army-ia"]).factory("BattleActionsFactory",t),t.$inject=["BattleEvents","MoveArmyAction","FillNodesAction","PlanAIAction","MoveArmyIAAction"]}(),function(){"use strict";function t(t){function e(e){var n=t.distanceBetweenPoints(this.originNode.position,e.position);return n/this.DEFAULT_SPEED}function n(e,n){var i=e/1e3/this.timeToGetToDestination(n);i>1&&(i=1),0>i&&(i=0),this.position=t.getPointInBetween(this.originNode.position,n.position,i)}function i(t){this.force=this.force-t,this.force<=0&&this.destroy()}function o(){this.force=0,this.deleted=!0}var r=function(t){this.DEFAULT_INIT_FORCE=20,this.DEFAULT_SPEED=5,this.player=t.player,this.position=angular.copy(t.node?t.node.position:t.originNode.position),this.node=t.node,this.originNode=t.originNode,this.force=angular.isUndefined(t.force)?this.DEFAULT_INIT_FORCE:t.force};return r.prototype={timeToGetToDestination:e,updatePosition:n,removeForce:i,destroy:o},r}angular.module("caveBattles.army",["caveBattles.utils.geometry"]).factory("Army",t),t.$inject=["Geometry"]}(),function(){"use strict";function t(t){function e(t,e){var i=n(e,t);return o(i)}function n(t,e){var n=[];return angular.forEach(t,function(o){i(o,e)&&(n=n.concat(r(o,t,e)))}),n}function i(t,e){return t.currentOwner&&t.currentOwner===e}function o(t){var e=0;return t.length>1&&(e=Math.floor(Math.random()*t.length)),t[e]}function r(t,e,n){var o=[];return angular.forEach(e,function(e){t.canReachNode(e)&&!i(e,n)&&t.ownerStrength>20&&o.push(a(t,e))}),o}function a(e,n){return{name:t.MOVE_ARMY_IA,params:{originNode:e,destinationNode:n}}}var s={getNextAction:e};return s}angular.module("caveBattles.simple-ai",["caveBattles.battle-actions-factory","caveBattles.battle-events"]).factory("SimpleAI",t),t.$inject=["BattleEvents"]}(),function(){"use strict";angular.module("caveBattles",["ngAnimate","ngCookies","ngTouch","ngSanitize","restangular","caveBattles.main-screen"])}(),angular.module("caveBattles").run(["$templateCache",function(t){t.put("app/battle-view/battle-view.tpl.html","<div class='battle-view' ng-click='onBackgroundClicked()'>\n    <div ng-repeat='node in battleInfo.nodes'>\n        <node node-info='node'></node>\n    </div>\n    <div ng-repeat='tunnel in battleInfo.tunnels'>\n        <tunnel tunnel-info='tunnel'></tunnel>\n    </div>\n\n    <div ng-repeat='army in battleInfo.armies'>\n        <army army-info='army'></army>\n    </div>\n</div>"),t.put("app/main/main-screen.tpl.html","<div>\n\n    <div ng-if='!vm.battleStarted' class='main-menu'>\n        <h1 class='main-title'>Cave Battles</h1>\n\n        <ul class='map-list'>\n            <li class='map-list-item' ng-repeat='map in vm.maps'>\n                <button class='map-list-button' ng-click='vm.startBattle(map)'>{{map.name}}</button>\n            </li>\n        </ul>\n    </div>\n\n    <battle-view ng-if='vm.battleStarted'></battle-view>\n</div>"),t.put("app/battle-view/army/army.tpl.html",'<div class=\'army player-{{vm.armyInfo.player.number}}\'\n     ng-style=\'{"top": vm.armyInfo.position.y + "%", "left": vm.armyInfo.position.x + "%"}\'\n        >\n     {{vm.armyInfo.force}}\n </div>'),t.put("app/battle-view/node/node.tpl.html","<div\n    class='node player-{{vm.nodeInfo.currentOwner.number}}'\n    ng-class='{\n        \"can-be-clicked\": vm.nodeInfo.canBeReachedBySelectedNode,\n        \"selected\": vm.nodeInfo.selected,\n        \"has-owner\": !!vm.nodeInfo.currentOwner\n    }'\n    ng-style='{\"top\": vm.nodeInfo.position.y + \"%\", \"left\": vm.nodeInfo.position.x + \"%\"}',\n    ng-click='vm.nodeClicked($event)'\n>\n\n    <div class='node-inner'></div>\n    <div class='node-owner-strength' ng-show='!!vm.nodeInfo.currentOwner' >{{vm.nodeInfo.ownerStrength}}</div>\n    <div class='node-partial-owner-strength  player-{{vm.nodeInfo.partialOwner.number}}' ng-show='!!vm.nodeInfo.partialOwner' >\n        <div class='node-partial-owner-strength-inner' ng-style='{\"top\": vm.getTopFill() + \"%\"}' ></div>\n    </div>\n</div>"),t.put("app/battle-view/tunnel/tunnel.tpl.html",'<div    class=\'tunnel\'\n        ng-style=\'{\n            "width": tunnelInfo.length + "%",\n            "top": tunnelInfo.middle.y + "%",\n            "left": tunnelInfo.middle.x + "%",\n            "margin-left": -(tunnelInfo.length/2) + "%",\n            "transform": "rotate(" + tunnelInfo.inclinationDeg + "deg)"\n        }\'>\n</div>')}]);